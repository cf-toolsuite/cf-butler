language: java

jdk:
  - openjdk11
  - oraclejdk11

build:
  cache: true
  cache_dir_list:
    - /home/shippable/.gradle/caches
  ci:
    - sdk use gradle 5.5
    - mkdir -p shippable/testresults
    - mkdir -p shippable/codecoverage
    - gradle clean build
  on_failure:
    - gradle dependencies
  always:
    - cp -r build/reports/jacoco/test shippable/codecoverage